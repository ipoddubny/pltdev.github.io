<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Plantronics Amazon Connect Demo 1</title>
</head>
<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="https://pltdev.github.io/spokes.js"></script> <!-- Plantronics API interface -->
    <script src="https://pltdev.github.io/util.js"></script>
    <h2>Plantronics Amazon Connect Demo</h2>
    Pre-requisite, install Plantronics Hub from: <a href="http://www.plantronics.com/software" target="_new">www.plantronics.com/software</a>
    <p>Note Firefox users: If you get "Error connecting to Plantronics Hub." then visit this URL: <a href="https://127.0.0.1:32018/Spokes/DeviceServices/Info" target="_new">https://127.0.0.1:32018/Spokes/DeviceServices/Info</a> and click Advanced > Add Exception... to add a security exception to allow the connection.</p>
    <div style="height:465px;width:320px" id="containerDiv">
    <script src="amazon-connect-v1.2.0.js"></script>
    <script>
        var activeCall = undefined;
        var callid = 0;
        connect.core.initCCP(containerDiv, {
            ccpUrl: "https://plt-oda.awsapps.com/connect/ccp#/",
            loginPopup: true,
            softphone: { allowFramedSoftphone: true }
        });
        connect.agent(function (agent) {
            console.log("Agent name = "+agent.getName());
        });
        connect.contact(function (contact) {
            activeCall = contact;
            console.log("contact callback invoked: ");
            print_r(activeCall);
            contact.onEnded(function (contact) {
                console.log("call ended");
            });
            contact.onConnecting(function (contact) {
                console.log("call ringing");
            });
            contact.onConnected(function (contact) {
                console.log("call started");
            });
        });    
    </script>
</body>
</html>